<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>State Department Foreign Assistance Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:wght@400;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f2ed; --white: #ffffff; --ink: #1a1a1a; --ink-light: #4a4a4a;
    --ink-dim: #8a8a8a; --ink-faint: #b5b5b5; --border: #d8d4cd; --border-light: #e8e4dd;
    --accent: #b8860b;
    --commitment: #1a6b4a; --commitment-bg: #e8f5ee;
    --announcement: #6b5b1a; --announcement-bg: #fdf6e3;
    --milestone: #4a5568; --milestone-bg: #f0f0f0;
    --health: #2563eb; --humanitarian: #dc2626; --agriculture: #16a34a;
    --innovation: #7c3aed; --policy: #d97706; --economic: #0891b2; --budget: #9333ea;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { overflow-x: hidden; }
  body { background: var(--bg); color: var(--ink); font-family: 'IBM Plex Sans', sans-serif; line-height: 1.6; -webkit-font-smoothing: antialiased; }

  /* STICKY HEADER */
  .sticky-header { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(255,255,255,0.94); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); transition: box-shadow 0.3s; }
  .sticky-header.scrolled { box-shadow: 0 2px 16px rgba(0,0,0,0.06); }
  .header-inner { max-width: 1100px; margin: 0 auto; padding: 0 32px; display: flex; justify-content: space-between; align-items: center; height: 52px; }
  .header-title { font-family: 'Source Serif 4', serif; font-size: 15px; font-weight: 600; flex-shrink: 0; }
  .header-tabs { display: flex; align-items: center; height: 100%; gap: 0; }
  .header-tab { font-family: 'IBM Plex Mono', monospace; font-size: 11px; letter-spacing: 0.5px; padding: 0 16px; height: 100%; display: flex; align-items: center; border-bottom: 2px solid transparent; color: var(--ink-dim); text-decoration: none; transition: all 0.2s; white-space: nowrap; }
  .header-tab:hover { color: var(--ink); }
  .header-tab.active { color: var(--ink); border-bottom-color: var(--accent); }
  .header-totals { display: flex; gap: 28px; align-items: baseline; }
  .total-block { text-align: right; }
  .total-label { font-family: 'IBM Plex Mono', monospace; font-size: 9px; letter-spacing: 1.2px; text-transform: uppercase; color: var(--ink-dim); display: block; }
  .total-value { font-family: 'Source Serif 4', serif; font-size: 22px; font-weight: 700; transition: all 0.4s; }
  .total-committed { color: var(--commitment); }
  .total-announced { color: var(--announcement); }

  /* HERO */
  .hero { padding: 120px 32px 40px; max-width: 720px; margin: 0 auto; text-align: center; }
  .hero h1 { font-family: 'Source Serif 4', serif; font-size: clamp(28px, 5vw, 42px); font-weight: 700; line-height: 1.2; margin-bottom: 16px; }
  .hero .subtitle { font-size: 16px; color: var(--ink-light); max-width: 560px; margin: 0 auto; line-height: 1.7; }

  /* EXPLAINER */
  .explainer { max-width: 640px; margin: 32px auto 40px; padding: 24px 28px; background: var(--white); border: 1px solid var(--border); border-radius: 6px; text-align: left; }
  .explainer-title { font-family: 'IBM Plex Mono', monospace; font-size: 10px; letter-spacing: 1.5px; text-transform: uppercase; color: var(--ink-dim); margin-bottom: 16px; }
  .explainer-item { display: flex; gap: 14px; align-items: flex-start; margin-bottom: 14px; }
  .explainer-item:last-child { margin-bottom: 0; }
  .explainer-dot { width: 14px; height: 14px; border-radius: 50%; flex-shrink: 0; margin-top: 3px; }
  .explainer-dot.ed-committed { background: var(--commitment); }
  .explainer-dot.ed-announced { background: var(--announcement-bg); border: 2px solid var(--announcement); }
  .explainer-dot.ed-milestone { background: none; border: 2px dashed var(--milestone); }
  .explainer-text strong { font-size: 14px; font-weight: 600; display: block; margin-bottom: 2px; }
  .explainer-text span { font-size: 13px; color: var(--ink-light); line-height: 1.5; }
  .explainer-note { margin-top: 16px; padding-top: 14px; border-top: 1px solid var(--border-light); font-size: 12px; color: var(--ink-dim); line-height: 1.6; font-style: italic; }

  /* BUDGET BOXES */
  .budget-context { max-width: 720px; margin: 0 auto 48px; padding: 0 32px; display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
  .budget-box { background: var(--white); border: 1px solid var(--border); border-radius: 6px; padding: 16px 22px; text-align: center; min-width: 150px; }
  .budget-box .bl { font-family: 'IBM Plex Mono', monospace; font-size: 9px; letter-spacing: 1px; text-transform: uppercase; color: var(--ink-dim); margin-bottom: 4px; }
  .budget-box .bv { font-family: 'Source Serif 4', serif; font-size: 22px; font-weight: 700; }
  .budget-box .bn { font-size: 11px; color: var(--ink-dim); margin-top: 2px; }

  /* TIMELINE — DESKTOP */
  .timeline-wrap { max-width: 1060px; margin: 0 auto; padding: 0 24px 100px; position: relative; }
  .timeline-rail { position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background: var(--border); transform: translateX(-1px); }

  .month-row { position: relative; min-height: 160px; display: flex; align-items: flex-start; padding-bottom: 20px; }
  .month-row.empty { min-height: 160px; }

  .month-marker { position: absolute; left: 50%; top: 0; transform: translateX(-50%); z-index: 3; background: var(--bg); padding: 4px 14px; border: 1px solid var(--border); border-radius: 20px; text-align: center; white-space: nowrap; }
  .month-marker .mm-name { font-family: 'Source Serif 4', serif; font-size: 13px; font-weight: 600; color: var(--ink); }
  .month-marker .mm-year { font-family: 'IBM Plex Mono', monospace; font-size: 9px; color: var(--ink-dim); margin-left: 4px; }
  .month-row.empty .month-marker { border-style: dashed; }
  .month-row.empty .mm-name { color: var(--ink-faint); font-weight: 400; }

  .col-left, .col-right { width: calc(50% - 24px); padding-top: 40px; }
  .col-left { padding-right: 16px; }
  .col-right { padding-left: 16px; margin-left: auto; }

  /* EVENT CARDS */
  .event-card { background: var(--white); border: 1px solid var(--border); border-left: 3px solid var(--border); border-radius: 4px; padding: 14px 16px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; }
  .event-card:hover { box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
  .event-card.type-commitment { border-left-color: var(--commitment); background: var(--commitment-bg); }
  .event-card.type-announcement { border-left-color: var(--announcement); background: var(--announcement-bg); }
  .event-card.type-milestone { border-left-color: var(--milestone); background: var(--milestone-bg); border-left-style: dashed; }

  .col-right .event-card { border-left: 1px solid var(--border); border-right: 3px solid var(--border); }
  .col-right .event-card.type-commitment { border-right-color: var(--commitment); border-left-color: var(--border); }
  .col-right .event-card.type-announcement { border-right-color: var(--announcement); border-left-color: var(--border); }
  .col-right .event-card.type-milestone { border-right-color: var(--milestone); border-left-color: var(--border); border-right-style: dashed; }

  .card-top { display: flex; justify-content: space-between; align-items: flex-start; gap: 8px; }
  .card-left-inner { flex: 1; min-width: 0; }
  .card-tags { display: flex; gap: 5px; margin-bottom: 5px; flex-wrap: wrap; }
  .tag { font-family: 'IBM Plex Mono', monospace; font-size: 8px; letter-spacing: 0.7px; text-transform: uppercase; padding: 2px 6px; border-radius: 3px; font-weight: 500; }
  .tag-type-commitment { background: rgba(26,107,74,0.12); color: var(--commitment); }
  .tag-type-announcement { background: rgba(107,91,26,0.12); color: var(--announcement); }
  .tag-type-milestone { background: rgba(74,85,104,0.12); color: var(--milestone); }
  .tag-sector { background: rgba(0,0,0,0.04); }
  .tag-sector.s-health { color: var(--health); } .tag-sector.s-humanitarian { color: var(--humanitarian); }
  .tag-sector.s-agriculture { color: var(--agriculture); } .tag-sector.s-innovation { color: var(--innovation); }
  .tag-sector.s-policy { color: var(--policy); } .tag-sector.s-economic { color: var(--economic); }
  .tag-sector.s-budget { color: var(--budget); }

  .card-title { font-family: 'Source Serif 4', serif; font-size: 15px; font-weight: 600; line-height: 1.3; margin-bottom: 3px; }
  .card-date { font-size: 11px; color: var(--ink-dim); }
  .card-amounts { text-align: right; flex-shrink: 0; }
  .card-total-amount { font-family: 'Source Serif 4', serif; font-size: 17px; font-weight: 700; line-height: 1.2; }
  .card-total-amount.c-commitment { color: var(--commitment); }
  .card-total-amount.c-announcement { color: var(--announcement); }
  .card-total-amount.c-milestone { color: var(--milestone); font-size: 13px; }
  .card-annual { font-family: 'IBM Plex Mono', monospace; font-size: 10px; color: var(--ink-dim); margin-top: 2px; }
  .card-desc { font-size: 12px; color: var(--ink-light); margin-top: 6px; line-height: 1.55; }
  .expand-hint { font-size: 10px; color: var(--ink-faint); margin-top: 5px; font-style: italic; }
  .event-card.expanded .expand-hint { display: none; }
  .card-details { max-height: 0; overflow: hidden; transition: max-height 0.35s ease; }
  .event-card.expanded .card-details { max-height: 600px; }
  .card-details-inner { padding-top: 10px; margin-top: 10px; border-top: 1px solid var(--border-light); }
  .detail-row { display: flex; justify-content: space-between; padding: 2px 0; font-size: 11px; gap: 8px; }
  .detail-k { color: var(--ink-dim); flex-shrink: 0; }
  .detail-v { color: var(--ink-light); font-weight: 500; text-align: right; }
  .source-link { display: inline-flex; align-items: center; gap: 4px; margin-top: 8px; font-family: 'IBM Plex Mono', monospace; font-size: 10px; color: var(--accent); text-decoration: none; font-weight: 500; }
  .source-link:hover { text-decoration: underline; }

  .rail-dot { position: absolute; left: 50%; width: 10px; height: 10px; border-radius: 50%; border: 2px solid; background: var(--bg); transform: translateX(-5px); z-index: 2; }
  .rail-dot.rd-commitment { border-color: var(--commitment); background: var(--commitment); }
  .rail-dot.rd-announcement { border-color: var(--announcement); background: var(--announcement-bg); }
  .rail-dot.rd-milestone { border-color: var(--milestone); background: var(--bg); border-style: dashed; }

  /* FOOTER */
  .footer { max-width: 720px; margin: 0 auto; padding: 32px 32px 80px; border-top: 1px solid var(--border); }
  .footer p { font-size: 11px; color: var(--ink-dim); line-height: 1.8; text-align: center; }

  /* =====================
     MOBILE STYLES
     ===================== */
  @media (max-width: 640px) {

    /* Header — hide title and tabs on mobile, show only totals */
    .header-inner {
      padding: 8px 14px;
      flex-direction: row;
      align-items: center;
    }
    .header-title {
      display: none;
    }
    .header-tabs {
      height: auto;
      gap: 0;
    }
    .header-tab {
      font-size: 10px;
      padding: 0 10px;
      height: 36px;
      border-bottom-width: 2px;
    }
    .header-totals {
      gap: 16px;
      margin-left: auto;
    }
    .total-block {
      text-align: center;
    }
    .total-label {
      font-size: 8px;
      letter-spacing: 0.6px;
    }
    .total-value {
      font-size: 16px;
    }

    /* Hero — generous top padding to clear header */
    .hero {
      padding: 80px 16px 24px;
    }
    .hero h1 {
      font-size: 22px;
      margin-bottom: 10px;
    }
    .hero .subtitle {
      font-size: 13px;
      line-height: 1.6;
    }

    /* Explainer */
    .explainer {
      margin: 16px 10px 24px;
      padding: 14px 12px;
    }
    .explainer-title {
      font-size: 9px;
      letter-spacing: 1px;
      margin-bottom: 10px;
    }
    .explainer-item {
      gap: 10px;
      margin-bottom: 10px;
    }
    .explainer-dot {
      width: 11px;
      height: 11px;
      margin-top: 2px;
    }
    .explainer-text strong {
      font-size: 12px;
    }
    .explainer-text span {
      font-size: 11px;
    }
    .explainer-note {
      font-size: 10px;
      margin-top: 10px;
      padding-top: 10px;
    }

    /* Budget boxes — row of 3, very compact */
    .budget-context {
      padding: 0 10px;
      gap: 6px;
      margin-bottom: 20px;
      flex-wrap: nowrap;
    }
    .budget-box {
      padding: 8px 6px;
      min-width: 0;
      flex: 1;
    }
    .budget-box .bl {
      font-size: 6px;
      letter-spacing: 0.3px;
    }
    .budget-box .bv {
      font-size: 15px;
    }
    .budget-box .bn {
      font-size: 8px;
    }

    /* Timeline — single column, rail on left */
    .timeline-wrap {
      padding: 0 10px 60px;
    }
    .timeline-rail {
      left: 18px;
      transform: none;
    }

    /* Month marker — left-aligned */
    .month-marker {
      left: 18px;
      transform: translateX(-50%);
      padding: 2px 8px;
    }
    .month-marker .mm-name {
      font-size: 11px;
    }
    .month-marker .mm-year {
      font-size: 8px;
    }

    /* Both columns become full-width, offset from left rail */
    .month-row {
      flex-direction: column;
      min-height: auto;
      padding-bottom: 10px;
    }
    .month-row.empty {
      min-height: 56px;
    }
    .col-left, .col-right {
      width: 100%;
      margin-left: 0;
      padding: 0;
      padding-left: 38px;
      padding-top: 0;
    }
    .col-left {
      padding-top: 36px;
    }

    /* Fix right-column card borders for mobile (all left-bordered) */
    .col-right .event-card {
      border-left: 3px solid var(--border);
      border-right: 1px solid var(--border);
    }
    .col-right .event-card.type-commitment {
      border-left-color: var(--commitment);
      border-right-color: var(--border);
    }
    .col-right .event-card.type-announcement {
      border-left-color: var(--announcement);
      border-right-color: var(--border);
    }
    .col-right .event-card.type-milestone {
      border-left-color: var(--milestone);
      border-right-color: var(--border);
      border-left-style: dashed;
      border-right-style: solid;
    }

    /* Rail dot */
    .rail-dot {
      left: 18px;
      transform: translateX(-5px);
    }

    /* Cards — very compact */
    .event-card {
      padding: 10px 10px;
      margin-bottom: 7px;
    }
    .card-top {
      flex-direction: row;
      align-items: flex-start;
      gap: 6px;
    }
    .card-title {
      font-size: 13px;
      line-height: 1.25;
    }
    .card-date {
      font-size: 10px;
    }
    .card-desc {
      font-size: 11px;
      margin-top: 4px;
      line-height: 1.45;
    }
    .card-total-amount {
      font-size: 13px;
    }
    .card-annual {
      font-size: 9px;
    }
    .card-amounts {
      text-align: right;
      flex-shrink: 0;
      max-width: 90px;
    }
    .tag {
      font-size: 7px;
      padding: 1px 4px;
    }
    .expand-hint {
      font-size: 9px;
    }
    .detail-row {
      font-size: 10px;
      flex-direction: row;
      flex-wrap: wrap;
    }
    .detail-v {
      text-align: right;
    }
    .source-link {
      font-size: 10px;
    }

    /* Footer */
    .footer {
      padding: 20px 12px 50px;
    }
    .footer p {
      font-size: 10px;
      line-height: 1.7;
    }
  }
</style>
</head>
<body>

<div class="sticky-header" id="stickyHeader">
  <div class="header-inner">
    <span class="header-title">Foreign Assistance Tracker</span>
    <div class="header-tabs">
      <a href="index.html" class="header-tab active">Timeline</a>
      <a href="dashboard.html" class="header-tab">Dashboard</a>
    </div>
    <div class="header-totals">
      <div class="total-block">
        <span class="total-label">Committed (annual)</span>
        <span class="total-value total-committed" id="totalCommitted">$0</span>
      </div>
      <div class="total-block">
        <span class="total-label">Announced (annual)</span>
        <span class="total-value total-announced" id="totalAnnounced">$0</span>
      </div>
    </div>
  </div>
</div>

<section class="hero">
  <h1>Where Is the Money Going?</h1>
  <p class="subtitle">Every major foreign assistance deal, commitment, and strategy from the State Department since it assumed responsibility for foreign assistance. Scroll to follow the money month by month.</p>
</section>

<div class="explainer">
  <div class="explainer-title">How to read this tracker</div>
  <div class="explainer-item">
    <div class="explainer-dot ed-committed"></div>
    <div class="explainer-text">
      <strong>Committed</strong>
      <span>Funds obligated, awarded, or under signed contract. Money is moving through a binding vehicle — a grant award, executed contract, or contribution to a pooled fund.</span>
    </div>
  </div>
  <div class="explainer-item">
    <div class="explainer-dot ed-announced"></div>
    <div class="explainer-text">
      <strong>Announced</strong>
      <span>Pledged or planned but not yet obligated. Includes MOUs (non-binding statements of intent), multi-year pledges subject to future appropriations, and solicitations not yet awarded. These signal direction but are not guaranteed.</span>
    </div>
  </div>
  <div class="explainer-item">
    <div class="explainer-dot ed-milestone"></div>
    <div class="explainer-text">
      <strong>Milestone</strong>
      <span>Strategy releases, delivery events, legislation, and conferences. No new spending, but sets the framework for what follows.</span>
    </div>
  </div>
  <div class="explainer-note">
    Multi-year deals are annualized in the running total. A $1.6B five-year MOU counts as ~$320M/yr, not $1.6B. Each card shows both the headline figure and the per-year amount. Click any card for details and source links.
  </div>
</div>

<div class="budget-context">
  <div class="budget-box"><div class="bl">FY25 Enacted</div><div class="bv">$59.7B</div><div class="bn">SFOPS total</div></div>
  <div class="budget-box"><div class="bl">FY26 Enacted</div><div class="bv">$50.0B</div><div class="bn">Bipartisan bill</div></div>
  <div class="budget-box"><div class="bl">FY26 Admin Request</div><div class="bv">$30.1B</div><div class="bn">−50% from FY25</div></div>
</div>

<div class="timeline-wrap">
  <div class="timeline-rail"></div>
  <div id="timeline"></div>
</div>

<div class="footer">
  <p>Sources: state.gov, whitehouse.gov, congress.gov, grants.gov, theglobalfund.org<br>
  Running totals use annualized figures for multi-year commitments. Co-investment shown separately on cards.<br>
  Draft — Last updated February 26, 2026</p>
</div>

<script>
const events = [
  // --- JUL 2025 ---
  { month:"2025-07", date:"Jul 22, 2025", title:"Philippines Energy Assistance",
    type:"commitment", sector:"economic", sectorLabel:"Economic",
    totalAmount:63e6, annualAmount:63e6, years:1,
    displayTotal:"$63M", displayAnnual:null,
    desc:"Energy sector assistance during President Marcos Jr. visit. Energy infrastructure and private sector investment.",
    details:{"Partner":"Government of the Philippines","Sector":"Energy infrastructure","Type":"Bilateral grant"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2025/07/secretary-rubios-meeting-with-philippine-president-marcos-jr" },

  // --- SEP 2025 ---
  { month:"2025-09", date:"Sep 4, 2025", title:"Gilead Lenacapavir — HIV Prevention",
    type:"announcement", sector:"health", sectorLabel:"Health",
    totalAmount:0, annualAmount:0, years:3,
    displayTotal:"2M doses at cost", displayAnnual:"Via existing PEPFAR budget",
    desc:"Pre-market deal for twice-yearly HIV prevention injection. 99% effective. Gilead provides at cost, shares IP with generic manufacturers.",
    details:{"Partner":"Gilead Sciences + Global Fund","Drug":"Lenacapavir (twice-yearly)","Efficacy":">99% HIV prevention","Year 1":"600K doses (325K US-funded)","Target":"2M doses by mid-2027","Note":"No new $ — existing PEPFAR funds"},
    source:"https://www.state.gov/releases/the-united-states-presidents-emergency-plan-for-aids-relief/2025/09/pepfars-support-of-american-innovation-to-reach-up-to-2-million-people-by-2028-with-breakthrough-hiv-drug-lenacapavir" },

  { month:"2025-09", date:"Sep 11, 2025", title:"Philippines Health Systems",
    type:"commitment", sector:"health", sectorLabel:"Health",
    totalAmount:250e6, annualAmount:250e6, years:1,
    displayTotal:"$250M", displayAnnual:null,
    desc:"TB, maternal/child health, disease surveillance, lab strengthening. Total Philippines commitment now $313M.",
    details:{"Partner":"Government of the Philippines","Focus":"TB, maternal health, lab systems","Implementation":"Embassy Foreign Assistance Section"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2025/09/u-s-announces-new-health-sector-assistance-for-the-philippines" },

  { month:"2025-09", date:"Sep 18, 2025", title:"America First Global Health Strategy",
    type:"milestone", sector:"health", sectorLabel:"Health",
    totalAmount:0, annualAmount:0, years:0,
    displayTotal:"Strategy", displayAnnual:null,
    desc:"36-page strategy released by GHSD bureau. Three pillars: Safer, Stronger, More Prosperous. Establishes bilateral MOU framework with co-investment requirements.",
    details:{"Pillars":"Safer, Stronger, More Prosperous","Key mechanism":"Bilateral MOUs with country co-investment","Focus areas":"HIV, TB, malaria, polio, global health security","Target":"MOUs with dozens of countries by Dec 31, 2025","Replaces":"Withdrawn Biden-era GHS strategy"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2025/09/release-of-the-america-first-global-health-strategy" },

  // --- NOV 2025 ---
  { month:"2025-11", date:"Nov 18, 2025", title:"First Lenacapavir Doses Delivered",
    type:"milestone", sector:"health", sectorLabel:"Health",
    totalAmount:0, annualAmount:0, years:0,
    displayTotal:"Milestone", displayAnnual:null,
    desc:"First shipments to Eswatini and Zambia — 5 months from FDA approval to sub-Saharan Africa. A first for any HIV medicine.",
    details:{"Countries":"Eswatini, Zambia (10 total planned)","Speed":"5 months from FDA approval","Focus":"Pregnant/breastfeeding mothers"},
    source:"https://www.state.gov/releases/2025/11/driving-global-health-progress-through-american-innovation-and-burden-sharing-the-first-doses-of-lenacapavir-arrive-in-eswatini-and-zambia" },

  { month:"2025-11", date:"Nov 21, 2025", title:"Global Fund Replenishment Pledge",
    type:"announcement", sector:"health", sectorLabel:"Health",
    totalAmount:4.6e9, annualAmount:1.15e9, years:4,
    displayTotal:"$4.6B over 4 yrs", displayAnnual:"~$1.15B/yr",
    desc:"US pledge for 2026–2029 cycle. Down from $6B prior. 1:2 matching requires other donors to contribute $2 per $1 US.",
    details:{"Period":"2026–2029 (4 years)","Prior cycle":"$6B (23% cut)","Matching":"$2 from others per $1 US","Total raised":"$11.3B of $18B target","Status":"Pledge — subject to annual appropriations"},
    source:"https://www.theglobalfund.org/en/replenishment/" },

  { month:"2025-11", date:"Nov 25, 2025", title:"Zipline Drone Delivery Network",
    type:"commitment", sector:"innovation", sectorLabel:"Innovation",
    totalAmount:150e6, annualAmount:50e6, years:3,
    displayTotal:"$150M / 3 yrs", displayAnnual:"~$50M/yr US",
    desc:"First pay-for-performance grant. Autonomous medical supply delivery in 5 African countries. Governments commit $400M in utilization fees.",
    details:{"Partner":"Zipline International","Countries":"Rwanda, Ghana, Nigeria, Kenya, Côte d'Ivoire","Facilities":"Up to 15,000","Gov co-invest":"$400M (utilization fees)","Model":"Pay-for-performance","US benefit":"Engineering + manufacturing jobs"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2025/11/advancing-the-america-first-global-health-strategy-and-promoting-american-innovation" },

  // --- DEC 2025 ---
  { month:"2025-12", date:"Dec 4, 2025", title:"Kenya Health Framework",
    type:"announcement", sector:"health", sectorLabel:"Health",
    totalAmount:1.6e9, annualAmount:320e6, years:5,
    displayTotal:"$1.6B US / 5 yrs", displayAnnual:"~$320M/yr US",
    desc:"First bilateral health compact. $1.6B US + $850M Kenya. Procurement transitions to KEMSA by 2026. 2:1 reduction clause.",
    details:{"Total":"$2.5B ($1.6B US + $850M Kenya)","US annual":"~$320M/yr","Kenya annual":"~$170M/yr","Focus":"HIV, TB, malaria, maternal health","Reform":"KEMSA procurement by Dec 2026","Enforcement":"2:1 cut if Kenya misses targets","Status":"MOU — non-binding"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2025/12/advancing-the-america-first-global-health-strategy-through-landmark-bilateral-agreements-on-global-health-cooperation" },

  { month:"2025-12", date:"Dec 5–22, 2025", title:"13 More Bilateral Health MOUs",
    type:"announcement", sector:"health", sectorLabel:"Health",
    totalAmount:6.4e9, annualAmount:1.28e9, years:5,
    displayTotal:"~$6.4B US / 5 yrs", displayAnnual:"~$1.28B/yr US",
    desc:"Rapid signing: Rwanda, Uganda, Nigeria, Liberia, Lesotho, Eswatini, Mozambique, Cameroon, Ethiopia, Malawi, Botswana, Madagascar, Sierra Leone, Côte d'Ivoire.",
    details:{"Largest":"Nigeria $5.1B ($2.1B US + $3B Nigeria)","All MOUs US total":"~$8B / 5 yrs (incl. Kenya)","Country co-invest":">$5B total","Enforcement":"2:1 reduction clause","Avg cut vs FY24":"~49% per country","Status":"MOUs — non-binding, subject to appropriations"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2025/12/delivering-on-president-trumps-commitment-america-first-global-health-strategy-and-bilateral-health-mous" },

  { month:"2025-12", date:"Dec 15, 2025", title:"Indo-Pacific Assistance Conference",
    type:"milestone", sector:"policy", sectorLabel:"Policy",
    totalAmount:0, annualAmount:0, years:0,
    displayTotal:"Policy", displayAnnual:null,
    desc:"State Dept outlines Indo-Pacific approach. Philippines, Quad Ports of the Future, PNG corridor, Pacific islands.",
    details:{"Themes":"Alliances, commercial engagement, counter-narcotics","Key initiative":"Quad Ports of the Future Partnership"},
    source:"https://www.state.gov/releases/bureau-of-east-asian-and-pacific-affairs/2025/12/america-first-foreign-assistance-in-the-indo-pacific" },

  { month:"2025-12", date:"Dec 29, 2025", title:"OCHA Humanitarian Reset",
    type:"commitment", sector:"humanitarian", sectorLabel:"Humanitarian",
    totalAmount:2e9, annualAmount:2e9, years:1,
    displayTotal:"$2B", displayAnnual:"Initial 2026 contribution",
    desc:"All US humanitarian funding shifts to OCHA pooled funds. Replaces fragmented grants. 17 countries. UN agencies 'adapt, shrink, or die.'",
    details:{"Structure":"Consolidated pooled funds via OCHA","Savings claim":"$1.9B vs prior model","Scope":"17 countries","Features":"Negative earmarks, hyper-prioritization","Requirement":"UN agencies adapt or lose funding"},
    source:"https://www.state.gov/releases/under-secretary-for-foreign-assistance-humanitarian-affairs-and-religious-freedom/2025/12/more-lives-saved-for-fewer-taxpayer-dollars-trump-administration-leads-humanitarian-reset-in-the-united-nations" },

  // --- JAN 2026 ---
  { month:"2026-01", date:"Jan 14, 2026", title:"White House SAP on HR 7006 (FY26 Approps)",
    type:"milestone", sector:"budget", sectorLabel:"Budget",
    totalAmount:0, annualAmount:0, years:0,
    displayTotal:"Policy", displayAnnual:null,
    desc:"Statement of Administration Policy endorses FY26 SFOPS bill. Highlights creation of America First Opportunity Fund, acknowledges USAID closure, supports consolidated foreign assistance accounts.",
    details:{"Bill":"HR 7006","Vote":"341–79 (House)","Key provision":"Creates America First Opportunity Fund","Aid posture":"'Significantly reducing spending, eliminating wasteful programs, consolidating accounts'","USAID":"Bill 'acknowledges the closure' and eliminates billions across USAID accounts","Recommendation":"Senior advisors recommend President sign"},
    source:"https://www.whitehouse.gov/wp-content/uploads/2026/01/SAP-HR7006.pdf" },

  { month:"2026-01", date:"Jan 16, 2026", title:"State Dept Agency Strategic Plan FY 2026–2030",
    type:"milestone", sector:"policy", sectorLabel:"Policy",
    totalAmount:0, annualAmount:0, years:0,
    displayTotal:"Strategy", displayAnnual:null,
    desc:"First post-USAID strategic plan. Goal 6: 'Targeted Foreign Assistance that Puts American Interests First.' Replaces prior joint State-USAID plan.",
    details:{"Key goal":"Goal 6: Targeted Foreign Assistance","Obj 6.1":"Leverage assistance as tool of statecraft","Obj 6.2":"Promote trade, not aid","Scope":"First plan without USAID as separate entity","Other goals":"Sovereignty, Western Hemisphere, Indo-Pacific, Europe, Economic Dominance"},
    source:"https://www.state.gov/wp-content/uploads/2026/01/ASP-for-Fiscal-Years-2026-2030-v5.pdf" },

  // --- FEB 2026 ---
  { month:"2026-02", date:"Feb 3, 2026", title:"FY26 Appropriations Signed",
    type:"milestone", sector:"budget", sectorLabel:"Budget",
    totalAmount:0, annualAmount:0, years:0,
    displayTotal:"$50B enacted", displayAnnual:"59% above admin request",
    desc:"Bipartisan SFOPS bill signed. $50B — nearly 60% above admin's $30.1B request. Congress reasserts authority, funds multilaterals and programs admin sought to cut.",
    details:{"Enacted":"$50B","Admin request":"$30.1B (+59% above)","vs FY25":"−$9.3B (−16%)","Key":"Congress funds CIO, peacekeeping, programs admin zeroed","USAID":"Bill does not mention USAID; funds go directly to State"},
    source:"https://www.congress.gov/bill/119th-congress/house-bill/7006" },

  { month:"2026-02", date:"Feb 18, 2026", title:"CIMMYT Crop Research Award",
    type:"commitment", sector:"agriculture", sectorLabel:"Agriculture",
    totalAmount:40e6, annualAmount:40e6, years:1,
    displayTotal:"$40M", displayAnnual:null,
    desc:"Grant to CIMMYT for drought/heat-tolerant maize and wheat, gene bank conservation, crop disease surveillance.",
    details:{"Partner":"CIMMYT (Texcoco, Mexico)","Focus":"Maize & wheat resilience, gene bank, digital ag","US benefit":"60% of US wheat uses CIMMYT varieties"},
    source:"https://www.state.gov/releases/office-of-the-spokesperson/2026/02/america-first-leadership-in-crop-research" },

  { month:"2026-02", date:"Feb 20, 2026", title:"Feed the Future Innovation Labs",
    type:"announcement", sector:"agriculture", sectorLabel:"Agriculture",
    totalAmount:64e6, annualAmount:64e6, years:1,
    displayTotal:"$64M", displayAnnual:"Solicitation posted",
    desc:"7 awards expected ($20–40M each). First restart since Jan 2025 USAID freeze. Closes April 3, 2026.",
    details:{"Awards":"7 expected","Range":"$20M–$40M each","Closes":"April 3, 2026","Note":"Labs idle since Jan 2025 freeze","Exception":"Climate Resilient Cereals (KSU) never stopped"},
    source:"https://simpler.grants.gov/opportunity/2334100f-f7b1-470c-9881-447ba64a0ee9" }
];

// Build months Jul 2025 → Feb 2026
const months = [];
let d = new Date(2025, 6, 1);
const end = new Date(2026, 3, 1);
while (d < end) {
  months.push({ key: d.getFullYear()+'-'+String(d.getMonth()+1).padStart(2,'0'), name: d.toLocaleString('en-US',{month:'long'}), year: d.getFullYear() });
  d.setMonth(d.getMonth()+1);
}

const timeline = document.getElementById('timeline');
let globalSide = 0;

months.forEach(m => {
  const mEvents = events.filter(e => e.month === m.key);
  const isEmpty = mEvents.length === 0;
  const row = document.createElement('div');
  row.className = 'month-row' + (isEmpty ? ' empty' : '');

  let html = `<div class="month-marker"><span class="mm-name">${m.name}</span><span class="mm-year">${m.year}</span></div>`;

  if (!isEmpty) {
    let leftCards = '', rightCards = '';
    mEvents.forEach(ev => {
      const card = buildCard(ev);
      if (globalSide % 2 === 0) leftCards += card; else rightCards += card;
      globalSide++;
    });
    html += `<div class="col-left">${leftCards}</div><div class="col-right">${rightCards}</div>`;
  }

  row.innerHTML = html;
  timeline.appendChild(row);
});

function buildCard(ev) {
  const typeLabel = ev.type.charAt(0).toUpperCase() + ev.type.slice(1);
  let dh = ev.details ? Object.entries(ev.details).map(([k,v]) => `<div class="detail-row"><span class="detail-k">${k}</span><span class="detail-v">${v}</span></div>`).join('') : '';
  return `<div class="event-card type-${ev.type}" onclick="this.classList.toggle('expanded')">
    <div class="card-top">
      <div class="card-left-inner">
        <div class="card-tags"><span class="tag tag-type-${ev.type}">${typeLabel}</span><span class="tag tag-sector s-${ev.sector}">${ev.sectorLabel}</span></div>
        <div class="card-title">${ev.title}</div>
        <div class="card-date">${ev.date}</div>
      </div>
      <div class="card-amounts">
        <div class="card-total-amount c-${ev.type}">${ev.displayTotal}</div>
        ${ev.displayAnnual ? `<div class="card-annual">${ev.displayAnnual}</div>` : ''}
      </div>
    </div>
    <div class="card-desc">${ev.desc}</div>
    <div class="expand-hint">Tap for details →</div>
    <div class="card-details"><div class="card-details-inner">${dh}${ev.source ? `<a class="source-link" href="${ev.source}" target="_blank" rel="noopener" onclick="event.stopPropagation()">View source →</a>` : ''}</div></div>
  </div>`;
}

// Equalize month row heights so time passes evenly — desktop only
function equalizeMonths() {
  if (window.innerWidth <= 640) {
    // On mobile, clear any set heights and let rows flow naturally
    document.querySelectorAll('.month-row').forEach(r => r.style.height = 'auto');
    return;
  }
  const rows = document.querySelectorAll('.month-row');
  rows.forEach(r => r.style.height = 'auto');
  let maxH = 160;
  rows.forEach(r => { if (r.offsetHeight > maxH) maxH = r.offsetHeight; });
  rows.forEach(r => r.style.height = maxH + 'px');
}
equalizeMonths();
window.addEventListener('resize', equalizeMonths);
document.querySelectorAll('.event-card').forEach(card => {
  card.addEventListener('click', () => setTimeout(equalizeMonths, 400));
});

// Running totals
function fmt(n) { if(n>=1e9) return '$'+(n/1e9).toFixed(1)+'B'; if(n>=1e6) return '$'+(n/1e6).toFixed(0)+'M'; return '$0'; }
const cEl=document.getElementById('totalCommitted'), aEl=document.getElementById('totalAnnounced'), hdr=document.getElementById('stickyHeader');
function updateTotals() {
  let c=0, a=0;
  document.querySelectorAll('.event-card').forEach((card,i) => {
    if(card.getBoundingClientRect().top < window.innerHeight*0.7) {
      const ev=events[i];
      if(ev.type==='commitment') c+=ev.annualAmount;
      else if(ev.type==='announcement') a+=ev.annualAmount;
    }
  });
  cEl.textContent=fmt(c); aEl.textContent=fmt(a);
  hdr.classList.toggle('scrolled', window.scrollY>100);
}
window.addEventListener('scroll', updateTotals, {passive:true});
updateTotals();
</script>
</body>
</html>
